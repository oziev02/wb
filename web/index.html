<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
    <title>Order Lookup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <style>
        body { font-family: system-ui, sans-serif; margin: 2rem; }
        .row { display:flex; gap:.5rem; margin-bottom:1rem; }
        input { flex:1; padding:.5rem; font-size:1rem; }
        button { padding:.5rem 1rem; font-size:1rem; cursor:pointer; }
        pre { background:#f6f8fa; padding:1rem; border-radius:8px; overflow:auto; }
        .muted { color:#666; font-size:.9rem; }
    </style>
</head>
<body>
<h1>Поиск заказа</h1>
<div class="row">
    <input id="oid" placeholder="Введите order_uid..." />
    <button id="btn">Найти</button>
</div>
<div class="muted">Пример: сгенерируй через producer или вставь из Kafka UI</div>
<pre id="out"></pre>

<script>
    const out = document.getElementById('out');
    document.getElementById('btn').onclick = async () => {
        const id = document.getElementById('oid').value.trim();
        if (!id) { out.textContent = 'Введите order_uid'; return; }
        out.textContent = 'Загружаю...';
        try {
            const res = await fetch('/order/' + encodeURIComponent(id));
            const text = await res.text();
            if (!res.ok) {
                out.textContent = 'Ошибка: ' + res.status + ' ' + text;
                return;
            }
            out.textContent = JSON.stringify(JSON.parse(text), null, 2);
        } catch (e) {
            out.textContent = 'Сетевая ошибка: ' + e;
        }
    };
</script>
</body>
</html>
